# RideUp - Веломаршруты в Битцевском лесу

RideUp - это интерактивная карта веломаршрутов в Битцевском лесу (Москва) с визуализацией высот, скоростей и ключевых точек маршрута.

## Возможности

* Просмотр предварительно загруженных GPX-треков
* Визуализация маршрутов с цветовой кодировкой по высоте
* Интерактивный профиль высот и скоростей
* Подробная информация о ключевых точках маршрута (чекпоинтах)
* Автоматическая загрузка фотографий местности для чекпоинтов
* Навигация между чекпоинтами
* Анализ сегментов маршрута (набор/потеря высоты)

## Установка и запуск

1.  Клонируйте репозиторий:
    ```bash
    git clone [https://github.com/yourusername/rideup.git](https://github.com/yourusername/rideup.git)
    cd rideup
    ```
2.  Установите необходимые зависимости:
    ```bash
    pip install dash dash-bootstrap-components plotly osmnx gpxpy numpy scipy pillow piexif requests shapely
    ```
3.  Создайте необходимые папки:
    ```bash
    mkdir local_routes
    mkdir local_photos
    ```
4.  Поместите ваши файлы:
    * GPX-треки в папку `local_routes`
    * Фотографии маршрутов в папку `local_photos` (с EXIF-данными о местоположении)
5.  Запустите приложение:
    ```bash
    python app_core.py
    ```
6.  Откройте браузер по адресу: `http://127.0.0.1:8050/`

## Особенности работы

Приложение автоматически:

* Загружает все GPX-файлы из папки `local_routes`
* Анализирует треки, рассчитывая скорость и ускорение
* Строит сглаженные маршруты с профилем высот
* Сопоставляет фотографии с точками маршрута по времени и местоположению
* Позволяет интерактивно изучать маршруты на карте и графиках

## Структура проекта

Основные модули:

* `app_core.py` - Основной класс приложения Dash
* `route_manager.py` - Менеджер маршрутов и обработка данных
* `route.py` - Классы географических точек и маршрутов
* `track.py` - Классы для анализа треков (скорость, ускорение)
* `gpx_loader.py` - Загрузчик GPX-файлов
* `layout.py` - Настройка интерфейса
* `callbacks.py` - Все callback-функции Dash
* `map_visualization.py` - Функции визуализации карты
* `graph_generation.py` - Генерация графиков профилей
* `ui_components.py` - Компоненты пользовательского интерфейса
* `media_helpers.py` - Работа с фотографиями и медиа
* `map_helpers.py` - Вспомогательные географические функции

Папки:

* `local_routes/` - Хранение GPX-файлов
* `local_photos/` - Хранение фотографий маршрутов

## Технические особенности

* Использует OpenTopoData API для получения данных о высотах
* Применяет медианную фильтрацию и адаптивное сглаживание для анализа скорости
* Автоматически генерирует интерактивные графики и визуализации маршрутов.
